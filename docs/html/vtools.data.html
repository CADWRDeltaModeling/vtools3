<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>vtools.data package &#8212; vtools 0.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <script src="_static/documentation_options.js?v=7026087e"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="vtools.datastore package" href="vtools.datastore.html" />
    <link rel="prev" title="vtools package" href="vtools.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.png" border="0" alt="py4sci"/></a>
</div>



      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/dwrsmall.jpg" alt="Logo"/>
            </a></p>
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/dwrsmall.jpg" alt="Logo" />
    
  </a>
</p>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Introduction and concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="daylight_savings.html">Daylight Savings conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html">Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/filters.html">Averging, Filtering and Low Passing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/filters.html#Filters">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/tidal_envelope.html">Tidal Envelope Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/climatology.html">Fitting and using a climatology</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/merge_splice.html">Merging and Splicing Time Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/merge_splice.html#ts_merge:-strict-priority-option"><code class="docutils literal notranslate"><span class="pre">ts_merge</span></code>: strict priority option</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/extrapolation.html">Extrapolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/transition.html">Transitioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="vtools.html">vtools package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">vtools</a><ul>
  <li><a href="vtools.html">vtools package</a><ul>
      <li>Previous: <a href="vtools.html" title="previous chapter">vtools package</a></li>
      <li>Next: <a href="vtools.datastore.html" title="next chapter">vtools.datastore package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="vtools-data-package">
<h1>vtools.data package<a class="headerlink" href="#vtools-data-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-vtools.data.dst">
<span id="vtools-data-dst-module"></span><h2>vtools.data.dst module<a class="headerlink" href="#module-vtools.data.dst" title="Link to this heading">¶</a></h2>
<section id="daylight-savings-time-conversion">
<h3>Daylight Savings Time Conversion<a class="headerlink" href="#daylight-savings-time-conversion" title="Link to this heading">¶</a></h3>
<p>This module provides the function <a class="reference internal" href="#vtools.data.dst.dst_st" title="vtools.data.dst.dst_st"><code class="xref py py-func docutils literal notranslate"><span class="pre">dst_st()</span></code></a> for converting a pandas Series/Dataframe
with a naive DatetimeIndex that observes daylight savings time (DST) to a fixed
standard time zone (e.g., PST) using POSIX conventions.</p>
<p>See the automatic API documentation for details:
<a class="reference internal" href="#vtools.data.dst.dst_st" title="vtools.data.dst.dst_st"><code class="xref py py-func docutils literal notranslate"><span class="pre">vtools.data.dst.dst_st()</span></code></a></p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.dst.dst_st">
<span class="sig-name descname"><span class="pre">dst_st</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US/Pacific'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_tz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Etc/GMT+8'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/dst.html#dst_st"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.dst.dst_st" title="Link to this definition">¶</a></dt>
<dd><p>Convert a pandas Series with a datetime index from a timezone-unaware index
that observes DST (e.g., US/Pacific) to a fixed standard time zone (e.g., Etc/GMT+8)
using POSIX conventions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ts</strong><span class="classifier">pandas.Series</span></dt><dd><p>Time series with a naive (timezone-unaware) DatetimeIndex.</p>
</dd>
<dt><strong>src_tz</strong><span class="classifier">str, optional</span></dt><dd><p>Source timezone name (default is ‘US/Pacific’).</p>
</dd>
<dt><strong>target_tz</strong><span class="classifier">str, optional</span></dt><dd><p>Target standard timezone name (default is ‘Etc/GMT+8’).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>pandas.Series</dt><dd><p>Time series with index converted to the target standard timezone and made naive.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The function assumes the index is not already timezone-aware.</p></li>
<li><p>‘Etc/GMT+8’ is the correct tz name for UTC-8 (PST) in pytz; note the sign is reversed from what
might be expected.</p></li>
<li><p>Handles ambiguous/nonexistent times due to DST transitions.</p></li>
<li><p>The returned index is naive (timezone-unaware) but represents the correct standard time.</p></li>
<li><p>If the input index is already timezone-aware, this function will raise an error.</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">vtools</span> <span class="kn">import</span> <span class="n">dst_st</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2023-11-05 00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2023-11-05 04:00&quot;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;30min&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converted</span> <span class="o">=</span> <span class="n">dst_st</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">converted</span><span class="p">)</span>
<span class="go">2023-11-05 00:00:00    0</span>
<span class="go">2023-11-05 00:30:00    1</span>
<span class="go">2023-11-05 01:00:00    2</span>
<span class="go">2023-11-05 01:30:00    3</span>
<span class="go">2023-11-05 02:30:00    5</span>
<span class="go">2023-11-05 03:00:00    6</span>
<span class="go">2023-11-05 03:30:00    7</span>
<span class="go">2023-11-05 04:00:00    8</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-vtools.data.gap">
<span id="vtools-data-gap-module"></span><h2>vtools.data.gap module<a class="headerlink" href="#module-vtools.data.gap" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.gap.describe_null">
<span class="sig-name descname"><span class="pre">describe_null</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/gap.html#describe_null"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.gap.describe_null" title="Link to this definition">¶</a></dt>
<dd><p>If dset is a DataFrame, run describe_series_gaps on each column.
If it’s a Series, just run it once.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.gap.describe_series_gaps">
<span class="sig-name descname"><span class="pre">describe_series_gaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.3.2)"><span class="pre">Series</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/gap.html#describe_series_gaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.gap.describe_series_gaps" title="Link to this definition">¶</a></dt>
<dd><p>Print gaps in a single Series s, showing <cite>context</cite> non-null points
before and after each gap, with an ellipsis marker in between.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.gap.example_gap">
<span class="sig-name descname"><span class="pre">example_gap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/gap.html#example_gap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.gap.example_gap" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.gap.gap_count">
<span class="sig-name descname"><span class="pre">gap_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state='gap'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'int'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/gap.html#gap_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.gap.gap_count" title="Link to this definition">¶</a></dt>
<dd><p>Count missing data
Identifies gaps (runs of missing or non-missing data) and quantifies the
length of the gap in terms of number of samples, which works better for
regular series. Each time point receives the length of the run.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>ts</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></dt><dd><p>Time series to analyze</p>
</dd>
<dt><strong>state</strong><span class="classifier"><cite>str</cite> one of ‘gap’|’good’|’both’</span></dt><dd><p>State to count. If state is gap, block size of missing data are counted
and reported for time points in the gap (every point in a given gap will
receive the same value). Non missing data will have a size of zero.
Setting state to ‘good’ inverts this – missing blocks are reported as
zero and good data are counted.</p>
</dd>
<dt><strong>dtype</strong><span class="classifier"><cite>str</cite> or <cite>type</cite></span></dt><dd><p>Data type of output, should be acceptable to
pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="(in pandas v2.3.2)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">astype</span></code></a></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.gap.gap_distance">
<span class="sig-name descname"><span class="pre">gap_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disttype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'good'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/gap.html#gap_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.gap.gap_distance" title="Link to this definition">¶</a></dt>
<dd><p>For each element of ts, count the distance to the nearest good data/or bad data.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>ts</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></dt><dd></dd>
<dt><strong>Time series to analyze</strong></dt><dd></dd>
<dt><strong>disttype</strong><span class="classifier"><cite>str</cite> one of ‘bad’|’good’</span></dt><dd></dd>
<dt><strong>If disttype = “count” this is the number of values. If dist_type=”freq” it is in the units of ts.freq</strong></dt><dd></dd>
<dt><strong>(so if freq == “15min” it is in minutes”)</strong></dt><dd></dd>
<dt><strong>to</strong><span class="classifier"><cite>str</cite> one of ‘bad’|’good’</span></dt><dd></dd>
<dt><strong>If to = “good” this is the distance to the nearest good data (which is 0 for good data).</strong></dt><dd></dd>
<dt><strong>If to = “bad”, this is the distance to the nearest nan (which is 0 for nan).</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>result</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></dt><dd><p>A new regular time series with the same freq as the argument
holding the distance of good/bad data.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.gap.gap_size">
<span class="sig-name descname"><span class="pre">gap_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/gap.html#gap_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.gap.gap_size" title="Link to this definition">¶</a></dt>
<dd><p>Identifies gaps (runs of missing data) and quantifies the
length of the gap. Each time point receives the length of the run
in terms of seconds or number of values in the time dimension,
with non-missing data returning zero. Time is measured from the time the
data first started being missing to when the data first starts being not missing
.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>ts</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>result</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a></span></dt><dd><p>A new regular time series with the same freq as the argument
holding the size of the gap.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ndx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span><span class="n">freq</span><span class="o">=</span><span class="s1">&#39;15min&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">10.</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">10.</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals2</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">10.</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals0</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals0</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals1</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="o">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals1</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals1</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;vals0&#39;</span><span class="p">:</span><span class="n">vals0</span><span class="p">,</span><span class="s1">&#39;vals1&#39;</span><span class="p">:</span><span class="n">vals1</span><span class="p">,</span><span class="s1">&#39;vals2&#39;</span><span class="p">:</span><span class="n">vals2</span><span class="p">},</span><span class="n">index</span> <span class="o">=</span> <span class="n">ndx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span> <span class="o">=</span> <span class="n">gap_size</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">                         vals0  vals1  vals2</span>
<span class="go">2017-01-01 12:00:00    NaN    0.0    0.0</span>
<span class="go">2017-01-01 12:15:00    NaN    1.0    1.0</span>
<span class="go">2017-01-01 12:30:00    NaN    NaN    2.0</span>
<span class="go">2017-01-01 12:45:00    3.0    NaN    3.0</span>
<span class="go">2017-01-01 13:00:00    4.0    4.0    4.0</span>
<span class="go">2017-01-01 13:15:00    5.0    5.0    5.0</span>
<span class="go">2017-01-01 13:30:00    6.0    NaN    6.0</span>
<span class="go">2017-01-01 13:45:00    NaN    7.0    7.0</span>
<span class="go">2017-01-01 14:00:00    NaN    8.0    8.0</span>
<span class="go">2017-01-01 14:15:00    9.0    NaN    9.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
<span class="go">                         vals0  vals1  vals2</span>
<span class="go">2017-01-01 12:00:00   45.0    0.0    0.0</span>
<span class="go">2017-01-01 12:15:00   45.0    0.0    0.0</span>
<span class="go">2017-01-01 12:30:00   45.0   30.0    0.0</span>
<span class="go">2017-01-01 12:45:00    0.0   30.0    0.0</span>
<span class="go">2017-01-01 13:00:00    0.0    0.0    0.0</span>
<span class="go">2017-01-01 13:15:00    0.0    0.0    0.0</span>
<span class="go">2017-01-01 13:30:00    0.0   15.0    0.0</span>
<span class="go">2017-01-01 13:45:00   30.0    0.0    0.0</span>
<span class="go">2017-01-01 14:00:00   30.0    0.0    0.0</span>
<span class="go">2017-01-01 14:15:00    0.0    0.0    0.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-vtools.data.sample_series">
<span id="vtools-data-sample-series-module"></span><h2>vtools.data.sample_series module<a class="headerlink" href="#module-vtools.data.sample_series" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.sample_series.bessel_df">
<span class="sig-name descname"><span class="pre">bessel_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/sample_series.html#bessel_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.sample_series.bessel_df" title="Link to this definition">¶</a></dt>
<dd><p>Sample series with bessel function signals</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.sample_series.extra">
<span class="sig-name descname"><span class="pre">extra</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/sample_series.html#extra"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.sample_series.extra" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.sample_series.interval">
<span class="sig-name descname"><span class="pre">interval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/sample_series.html#interval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.sample_series.interval" title="Link to this definition">¶</a></dt>
<dd><p>Sampling interval of series</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.sample_series.jay_flinchem_chirptest">
<span class="sig-name descname"><span class="pre">jay_flinchem_chirptest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0002</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c4</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.75</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/sample_series.html#jay_flinchem_chirptest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.sample_series.jay_flinchem_chirptest" title="Link to this definition">¶</a></dt>
<dd><p>Approximation of the signal from Jay and Flinchem 1999
A comparison of methods for analysis of tidal records containing multi-scale non-tidal background energy
that has a small tide with noisy, river-influenced amplitude and subtide</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.sample_series.small_subtide">
<span class="sig-name descname"><span class="pre">small_subtide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subtide_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/sample_series.html#small_subtide"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.sample_series.small_subtide" title="Link to this definition">¶</a></dt>
<dd><p>Inspired by large tidal flow with small Qr undercurrent with 72hr period
This is a tough lowpass filtering job because the diurnal band is large and 
must be supressed in order to see the more subtle subtidal amplitude</p>
</dd></dl>

</section>
<section id="module-vtools.data.timeseries">
<span id="vtools-data-timeseries-module"></span><h2>vtools.data.timeseries module<a class="headerlink" href="#module-vtools.data.timeseries" title="Link to this heading">¶</a></h2>
<p>Time series module
Helpers for creating regular and irregular time series, transforming irregular to regular
and analyzing gaps.</p>
<dl class="py class">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PchipInterpolator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scipy/interpolate/_cubic.html#PchipInterpolator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">CubicHermiteSpline</span></code></p>
<p>PCHIP 1-D monotonic cubic interpolation.</p>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are arrays of values used to approximate some function f,
with <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">f(x)</span></code>. The interpolant uses monotonic cubic splines
to find the value of new points. (PCHIP stands for Piecewise Cubic
Hermite Interpolating Polynomial).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">ndarray, shape (npoints, )</span></dt><dd><p>A 1-D array of monotonically increasing real values. <code class="docutils literal notranslate"><span class="pre">x</span></code> cannot
include duplicate values (otherwise f is overspecified)</p>
</dd>
<dt><strong>y</strong><span class="classifier">ndarray, shape (…, npoints, …)</span></dt><dd><p>A N-D array of real values. <code class="docutils literal notranslate"><span class="pre">y</span></code>’s length along the interpolation
axis must be equal to the length of <code class="docutils literal notranslate"><span class="pre">x</span></code>. Use the <code class="docutils literal notranslate"><span class="pre">axis</span></code>
parameter to select the interpolation axis.</p>
</dd>
<dt><strong>axis</strong><span class="classifier">int, optional</span></dt><dd><p>Axis in the <code class="docutils literal notranslate"><span class="pre">y</span></code> array corresponding to the x-coordinate values. Defaults
to <code class="docutils literal notranslate"><span class="pre">axis=0</span></code>.</p>
</dd>
<dt><strong>extrapolate</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to extrapolate to out-of-bounds points based on first
and last intervals, or to return NaNs.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">CubicHermiteSpline</span></code></dt><dd><p>Piecewise-cubic interpolator.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Akima1DInterpolator</span></code></dt><dd><p>Akima 1D interpolator.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">CubicSpline</span></code></dt><dd><p>Cubic spline data interpolator.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">PPoly</span></code></dt><dd><p>Piecewise polynomial in terms of coefficients and breakpoints.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The interpolator preserves monotonicity in the interpolation data and does
not overshoot if the data is not smooth.</p>
<p>The first derivatives are guaranteed to be continuous, but the second
derivatives may jump at <span class="math notranslate nohighlight">\(x_k\)</span>.</p>
<p>Determines the derivatives at the points <span class="math notranslate nohighlight">\(x_k\)</span>, <span class="math notranslate nohighlight">\(f'_k\)</span>,
by using PCHIP algorithm <a class="reference internal" href="#r89bb1e7c9065-1" id="id1">[1]</a>.</p>
<p>Let <span class="math notranslate nohighlight">\(h_k = x_{k+1} - x_k\)</span>, and  <span class="math notranslate nohighlight">\(d_k = (y_{k+1} - y_k) / h_k\)</span>
are the slopes at internal points <span class="math notranslate nohighlight">\(x_k\)</span>.
If the signs of <span class="math notranslate nohighlight">\(d_k\)</span> and <span class="math notranslate nohighlight">\(d_{k-1}\)</span> are different or either of
them equals zero, then <span class="math notranslate nohighlight">\(f'_k = 0\)</span>. Otherwise, it is given by the
weighted harmonic mean</p>
<div class="math notranslate nohighlight">
\[\frac{w_1 + w_2}{f'_k} = \frac{w_1}{d_{k-1}} + \frac{w_2}{d_k}\]</div>
<p>where <span class="math notranslate nohighlight">\(w_1 = 2 h_k + h_{k-1}\)</span> and <span class="math notranslate nohighlight">\(w_2 = h_k + 2 h_{k-1}\)</span>.</p>
<p>The end slopes are set using a one-sided scheme <a class="reference internal" href="#r89bb1e7c9065-2" id="id2">[2]</a>.</p>
<p class="rubric">References</p>
<div role="list" class="citation-list">
<div class="citation" id="r89bb1e7c9065-1" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>F. N. Fritsch and J. Butland,
A method for constructing local
monotone piecewise cubic interpolants,
SIAM J. Sci. Comput., 5(2), 300-304 (1984).
<a href="#id3"><span class="problematic" id="id4">:doi:`10.1137/0905021`</span></a>.</p>
</div>
<div class="citation" id="r89bb1e7c9065-2" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>see, e.g., C. Moler, Numerical Computing with Matlab, 2004.
<a href="#id5"><span class="problematic" id="id6">:doi:`10.1137/1.9780898717952`</span></a></p>
</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>axis</strong></dt><dd></dd>
<dt><strong>c</strong></dt><dd></dd>
<dt><strong>extrapolate</strong></dt><dd></dd>
<dt><strong>x</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">__call__</span></code>(x[, nu, extrapolate])</p></td>
<td><p>Evaluate the piecewise polynomial or its derivative.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">derivative</span></code>([nu])</p></td>
<td><p>Construct a new piecewise polynomial representing the derivative.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">antiderivative</span></code>([nu])</p></td>
<td><p>Construct a new piecewise polynomial representing the antiderivative.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">roots</span></code>([discontinuity, extrapolate])</p></td>
<td><p>Find real roots of the piecewise polynomial.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.__doc__">
<span class="sig-name descname"><span class="pre">__doc__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&quot;PCHIP</span> <span class="pre">1-D</span> <span class="pre">monotonic</span> <span class="pre">cubic</span> <span class="pre">interpolation.\n\n</span>&#160;&#160;&#160; <span class="pre">``x``</span> <span class="pre">and</span> <span class="pre">``y``</span> <span class="pre">are</span> <span class="pre">arrays</span> <span class="pre">of</span> <span class="pre">values</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">approximate</span> <span class="pre">some</span> <span class="pre">function</span> <span class="pre">f,\n</span>&#160;&#160;&#160; <span class="pre">with</span> <span class="pre">``y</span> <span class="pre">=</span> <span class="pre">f(x)``.</span> <span class="pre">The</span> <span class="pre">interpolant</span> <span class="pre">uses</span> <span class="pre">monotonic</span> <span class="pre">cubic</span> <span class="pre">splines\n</span>&#160;&#160;&#160; <span class="pre">to</span> <span class="pre">find</span> <span class="pre">the</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">new</span> <span class="pre">points.</span> <span class="pre">(PCHIP</span> <span class="pre">stands</span> <span class="pre">for</span> <span class="pre">Piecewise</span> <span class="pre">Cubic\n</span>&#160;&#160;&#160; <span class="pre">Hermite</span> <span class="pre">Interpolating</span> <span class="pre">Polynomial).\n\n</span>&#160;&#160;&#160; <span class="pre">Parameters\n</span>&#160;&#160;&#160; <span class="pre">----------\n</span>&#160;&#160;&#160; <span class="pre">x</span> <span class="pre">:</span> <span class="pre">ndarray,</span> <span class="pre">shape</span> <span class="pre">(npoints,</span> <span class="pre">)\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">1-D</span> <span class="pre">array</span> <span class="pre">of</span> <span class="pre">monotonically</span> <span class="pre">increasing</span> <span class="pre">real</span> <span class="pre">values.</span> <span class="pre">``x``</span> <span class="pre">cannot\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">include</span> <span class="pre">duplicate</span> <span class="pre">values</span> <span class="pre">(otherwise</span> <span class="pre">f</span> <span class="pre">is</span> <span class="pre">overspecified)\n</span>&#160;&#160;&#160; <span class="pre">y</span> <span class="pre">:</span> <span class="pre">ndarray,</span> <span class="pre">shape</span> <span class="pre">(...,</span> <span class="pre">npoints,</span> <span class="pre">...)\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">N-D</span> <span class="pre">array</span> <span class="pre">of</span> <span class="pre">real</span> <span class="pre">values.</span> <span class="pre">``y``'s</span> <span class="pre">length</span> <span class="pre">along</span> <span class="pre">the</span> <span class="pre">interpolation\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">axis</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">equal</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">length</span> <span class="pre">of</span> <span class="pre">``x``.</span> <span class="pre">Use</span> <span class="pre">the</span> <span class="pre">``axis``\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">parameter</span> <span class="pre">to</span> <span class="pre">select</span> <span class="pre">the</span> <span class="pre">interpolation</span> <span class="pre">axis.\n</span>&#160;&#160;&#160; <span class="pre">axis</span> <span class="pre">:</span> <span class="pre">int,</span> <span class="pre">optional\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Axis</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">``y``</span> <span class="pre">array</span> <span class="pre">corresponding</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">x-coordinate</span> <span class="pre">values.</span> <span class="pre">Defaults\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">to</span> <span class="pre">``axis=0``.\n</span>&#160;&#160;&#160; <span class="pre">extrapolate</span> <span class="pre">:</span> <span class="pre">bool,</span> <span class="pre">optional\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">Whether</span> <span class="pre">to</span> <span class="pre">extrapolate</span> <span class="pre">to</span> <span class="pre">out-of-bounds</span> <span class="pre">points</span> <span class="pre">based</span> <span class="pre">on</span> <span class="pre">first\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">and</span> <span class="pre">last</span> <span class="pre">intervals,</span> <span class="pre">or</span> <span class="pre">to</span> <span class="pre">return</span> <span class="pre">NaNs.\n\n</span>&#160;&#160;&#160; <span class="pre">Methods\n</span>&#160;&#160;&#160; <span class="pre">-------\n</span>&#160;&#160;&#160; <span class="pre">__call__\n</span>&#160;&#160;&#160; <span class="pre">derivative\n</span>&#160;&#160;&#160; <span class="pre">antiderivative\n</span>&#160;&#160;&#160; <span class="pre">roots\n\n</span>&#160;&#160;&#160; <span class="pre">See</span> <span class="pre">Also\n</span>&#160;&#160;&#160; <span class="pre">--------\n</span>&#160;&#160;&#160; <span class="pre">CubicHermiteSpline</span> <span class="pre">:</span> <span class="pre">Piecewise-cubic</span> <span class="pre">interpolator.\n</span>&#160;&#160;&#160; <span class="pre">Akima1DInterpolator</span> <span class="pre">:</span> <span class="pre">Akima</span> <span class="pre">1D</span> <span class="pre">interpolator.\n</span>&#160;&#160;&#160; <span class="pre">CubicSpline</span> <span class="pre">:</span> <span class="pre">Cubic</span> <span class="pre">spline</span> <span class="pre">data</span> <span class="pre">interpolator.\n</span>&#160;&#160;&#160; <span class="pre">PPoly</span> <span class="pre">:</span> <span class="pre">Piecewise</span> <span class="pre">polynomial</span> <span class="pre">in</span> <span class="pre">terms</span> <span class="pre">of</span> <span class="pre">coefficients</span> <span class="pre">and</span> <span class="pre">breakpoints.\n\n</span>&#160;&#160;&#160; <span class="pre">Notes\n</span>&#160;&#160;&#160; <span class="pre">-----\n</span>&#160;&#160;&#160; <span class="pre">The</span> <span class="pre">interpolator</span> <span class="pre">preserves</span> <span class="pre">monotonicity</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">interpolation</span> <span class="pre">data</span> <span class="pre">and</span> <span class="pre">does\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">overshoot</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">smooth.\n\n</span>&#160;&#160;&#160; <span class="pre">The</span> <span class="pre">first</span> <span class="pre">derivatives</span> <span class="pre">are</span> <span class="pre">guaranteed</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">continuous,</span> <span class="pre">but</span> <span class="pre">the</span> <span class="pre">second\n</span>&#160;&#160;&#160; <span class="pre">derivatives</span> <span class="pre">may</span> <span class="pre">jump</span> <span class="pre">at</span> <span class="pre">:math:`x_k`.\n\n</span>&#160;&#160;&#160; <span class="pre">Determines</span> <span class="pre">the</span> <span class="pre">derivatives</span> <span class="pre">at</span> <span class="pre">the</span> <span class="pre">points</span> <span class="pre">:math:`x_k`,</span> <span class="pre">:math:`f'_k`,\n</span>&#160;&#160;&#160; <span class="pre">by</span> <span class="pre">using</span> <span class="pre">PCHIP</span> <span class="pre">algorithm</span> <span class="pre">[1]_.\n\n</span>&#160;&#160;&#160; <span class="pre">Let</span> <span class="pre">:math:`h_k</span> <span class="pre">=</span> <span class="pre">x_{k+1}</span> <span class="pre">-</span> <span class="pre">x_k`,</span> <span class="pre">and</span>&#160; <span class="pre">:math:`d_k</span> <span class="pre">=</span> <span class="pre">(y_{k+1}</span> <span class="pre">-</span> <span class="pre">y_k)</span> <span class="pre">/</span> <span class="pre">h_k`\n</span>&#160;&#160;&#160; <span class="pre">are</span> <span class="pre">the</span> <span class="pre">slopes</span> <span class="pre">at</span> <span class="pre">internal</span> <span class="pre">points</span> <span class="pre">:math:`x_k`.\n</span>&#160;&#160;&#160; <span class="pre">If</span> <span class="pre">the</span> <span class="pre">signs</span> <span class="pre">of</span> <span class="pre">:math:`d_k`</span> <span class="pre">and</span> <span class="pre">:math:`d_{k-1}`</span> <span class="pre">are</span> <span class="pre">different</span> <span class="pre">or</span> <span class="pre">either</span> <span class="pre">of\n</span>&#160;&#160;&#160; <span class="pre">them</span> <span class="pre">equals</span> <span class="pre">zero,</span> <span class="pre">then</span> <span class="pre">:math:`f'_k</span> <span class="pre">=</span> <span class="pre">0`.</span> <span class="pre">Otherwise,</span> <span class="pre">it</span> <span class="pre">is</span> <span class="pre">given</span> <span class="pre">by</span> <span class="pre">the\n</span>&#160;&#160;&#160; <span class="pre">weighted</span> <span class="pre">harmonic</span> <span class="pre">mean\n\n</span>&#160;&#160;&#160; <span class="pre">..</span> <span class="pre">math::\n\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">\\frac{w_1</span> <span class="pre">+</span> <span class="pre">w_2}{f'_k}</span> <span class="pre">=</span> <span class="pre">\\frac{w_1}{d_{k-1}}</span> <span class="pre">+</span> <span class="pre">\\frac{w_2}{d_k}\n\n</span>&#160;&#160;&#160; <span class="pre">where</span> <span class="pre">:math:`w_1</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">h_k</span> <span class="pre">+</span> <span class="pre">h_{k-1}`</span> <span class="pre">and</span> <span class="pre">:math:`w_2</span> <span class="pre">=</span> <span class="pre">h_k</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">h_{k-1}`.\n\n</span>&#160;&#160;&#160; <span class="pre">The</span> <span class="pre">end</span> <span class="pre">slopes</span> <span class="pre">are</span> <span class="pre">set</span> <span class="pre">using</span> <span class="pre">a</span> <span class="pre">one-sided</span> <span class="pre">scheme</span> <span class="pre">[2]_.\n\n\n</span>&#160;&#160;&#160; <span class="pre">References\n</span>&#160;&#160;&#160; <span class="pre">----------\n</span>&#160;&#160;&#160; <span class="pre">..</span> <span class="pre">[1]</span> <span class="pre">F.</span> <span class="pre">N.</span> <span class="pre">Fritsch</span> <span class="pre">and</span> <span class="pre">J.</span> <span class="pre">Butland,\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">method</span> <span class="pre">for</span> <span class="pre">constructing</span> <span class="pre">local\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">monotone</span> <span class="pre">piecewise</span> <span class="pre">cubic</span> <span class="pre">interpolants,\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">SIAM</span> <span class="pre">J.</span> <span class="pre">Sci.</span> <span class="pre">Comput.,</span> <span class="pre">5(2),</span> <span class="pre">300-304</span> <span class="pre">(1984).\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">:doi:`10.1137/0905021`.\n</span>&#160;&#160;&#160; <span class="pre">..</span> <span class="pre">[2]</span> <span class="pre">see,</span> <span class="pre">e.g.,</span> <span class="pre">C.</span> <span class="pre">Moler,</span> <span class="pre">Numerical</span> <span class="pre">Computing</span> <span class="pre">with</span> <span class="pre">Matlab,</span> <span class="pre">2004.\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">:doi:`10.1137/1.9780898717952`\n\n</span>&#160;&#160;&#160; <span class="pre">&quot;</span></em><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.__doc__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scipy/interpolate/_cubic.html#PchipInterpolator.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.__init__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.__module__">
<span class="sig-name descname"><span class="pre">__module__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'scipy.interpolate._cubic'</span></em><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.__module__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator._edge_case">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_edge_case</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scipy/interpolate/_cubic.html#PchipInterpolator._edge_case"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator._edge_case" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator._find_derivatives">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_find_derivatives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scipy/interpolate/_cubic.html#PchipInterpolator._find_derivatives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator._find_derivatives" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.axis">
<span class="sig-name descname"><span class="pre">axis</span></span><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.axis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.c">
<span class="sig-name descname"><span class="pre">c</span></span><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.c" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.extrapolate">
<span class="sig-name descname"><span class="pre">extrapolate</span></span><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.extrapolate" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vtools.data.timeseries.PchipInterpolator.x">
<span class="sig-name descname"><span class="pre">x</span></span><a class="headerlink" href="#vtools.data.timeseries.PchipInterpolator.x" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.datetime_elapsed">
<span class="sig-name descname"><span class="pre">datetime_elapsed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_or_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reftime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'d'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#datetime_elapsed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.datetime_elapsed" title="Link to this definition">¶</a></dt>
<dd><p>Convert a time series or DatetimeIndex to an integer/double series of elapsed time</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>index_or_ts</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatatimeIndex</span></code></span></dt><dd><p>Time series or index to be transformed</p>
</dd>
<dt><strong>reftime</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Timestamp.html#pandas.Timestamp" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatatimeIndex</span></code></a> or something convertible</span></dt><dd><p>The reference time upon which elapsed time is measured. Default of None means start of
series</p>
</dd>
<dt><strong>dtype</strong><span class="classifier">str like ‘i’ or ‘d’ or type like <cite>int</cite> (<cite>Int64</cite>) or <cite>float</cite> (<cite>Float64</cite>)</span></dt><dd><p>Data type for output, which starts out as a Float64 (‘d’) and gets converted, typically to Int64 (‘i’)</p>
</dd>
<dt><strong>inplace</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>If input is a data frame, replaces the index in-place with no copy</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>result</dt><dd><p>A new index using elapsed time from <cite>reftime</cite> as its value and of type <cite>dtype</cite></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.days">
<span class="sig-name descname"><span class="pre">days</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#days"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.days" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing d days</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.elapsed_datetime">
<span class="sig-name descname"><span class="pre">elapsed_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_or_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reftime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#elapsed_datetime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.elapsed_datetime" title="Link to this definition">¶</a></dt>
<dd><p>Convert a time series or numerical Index to a Datetime index or series</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>index_or_ts</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatatimeIndex</span></code></span></dt><dd><p>Time series or index to be transformed with index in elapsed seconds from <cite>reftime</cite></p>
</dd>
<dt><strong>reftime</strong><span class="classifier"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Timestamp.html#pandas.Timestamp" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatatimeIndex</span></code></a> or something convertible</span></dt><dd><p>The reference time upon which datetimes are to be evaluated.</p>
</dd>
<dt><strong>inplace</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>If input is a data frame, replaces the index in-place with no copy</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>result</dt><dd><p>A new index using DatetimeIndex inferred from elapsed time from <cite>reftime</cite> as its value and of type <cite>dtype</cite></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.example">
<span class="sig-name descname"><span class="pre">example</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.example" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.extrapolate_ts">
<span class="sig-name descname"><span class="pre">extrapolate_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ffill'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#extrapolate_ts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.extrapolate_ts" title="Link to this definition">¶</a></dt>
<dd><p>Extend a regular time series to a new start and/or end using a specified extrapolation method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ts</strong><span class="classifier">pandas.Series or pandas.DataFrame</span></dt><dd><p>The input time series with a DateTimeIndex and a regular frequency.</p>
</dd>
<dt><strong>start</strong><span class="classifier">datetime-like, optional</span></dt><dd><p>The new starting time. If None, no extension is done before the existing data.</p>
</dd>
<dt><strong>end</strong><span class="classifier">datetime-like, optional</span></dt><dd><p>The new ending time. If None, no extension is done after the existing data.</p>
</dd>
<dt><strong>method</strong><span class="classifier">{‘ffill’, ‘bfill’, ‘linear_slope’, ‘taper’, ‘constant’}, default ‘ffill’</span></dt><dd><p>The method used to fill new values outside the original time range:</p>
<ul class="simple">
<li><p>‘ffill’ : Forward-fill after the original data using its last value.</p></li>
<li><p>‘bfill’ : Backward-fill before the original data using its first value.</p></li>
<li><p>‘linear_slope’ : Bidirectional linear extrapolation using the first/last two points.</p></li>
<li><p>‘taper’ : One-sided linear interpolation to/from a specified value (<cite>val</cite>).</p></li>
<li><p>‘constant’ : One-sided constant value fill with <cite>val</cite>.</p></li>
</ul>
</dd>
<dt><strong>val</strong><span class="classifier">float, optional</span></dt><dd><p>Required for ‘taper’ and ‘constant’. Specifies the value to use.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>extended</strong><span class="classifier">pandas.Series or pandas.DataFrame</span></dt><dd><p>The time series extended and filled using the selected method.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><ul class="simple">
<li><p>If extrapolation rules are violated based on the method.</p></li>
<li><p>If method requires or forbids <cite>val</cite> and it’s misused.</p></li>
<li><p>If frequency cannot be inferred.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.hours">
<span class="sig-name descname"><span class="pre">hours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#hours"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.hours" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing h hours</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.is_regular">
<span class="sig-name descname"><span class="pre">is_regular</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#is_regular"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.is_regular" title="Link to this definition">¶</a></dt>
<dd><p>Check if a pandas DataFrame, Series, or xarray object with a time axis (axis 0)
has a regular time index.</p>
<dl>
<dt>Regular means:</dt><dd><ul class="simple">
<li><p>The index is unique.</p></li>
<li><p>The index equals a date_range spanning from the first to the last value with
the inferred frequency.</p></li>
</ul>
</dd>
<dt>Parameters:</dt><dd><p>ts : DataFrame, Series, or xarray object.
raise_exception (bool): If True, raises a ValueError when the index is not regular.</p>
<blockquote>
<div><p>Otherwise, returns False.</p>
</div></blockquote>
</dd>
<dt>Returns:</dt><dd><p>bool : True if the time index is regular; False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.minutes">
<span class="sig-name descname"><span class="pre">minutes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#minutes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.minutes" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing m minutes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.months">
<span class="sig-name descname"><span class="pre">months</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#months"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.months" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing m months</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.rts">
<span class="sig-name descname"><span class="pre">rts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">props</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#rts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.rts" title="Link to this definition">¶</a></dt>
<dd><p>Create a regular or calendar time series from data and time parameters</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier">array_like</span></dt><dd><dl class="simple">
<dt>Should be a array/list of values. There is no restriction on data</dt><dd><p>type, but not all functionality like addition or interpolation will work on all data.</p>
</dd>
</dl>
</dd>
<dt><strong>start</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pandas.Timestamp</span></code></span></dt><dd><p>Timestamp or a string or type that can be coerced to one.</p>
</dd>
<dt><strong>interval</strong><span class="classifier">_time_interval</span></dt><dd><p>Can also be a string representing a pandas <cite>freq</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>result</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pandas.DataFrame</span></code></span></dt><dd><p>A regular time series with the <cite>freq</cite> attribute set</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.rts_formula">
<span class="sig-name descname"><span class="pre">rts_formula</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valfunc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#rts_formula"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.rts_formula" title="Link to this definition">¶</a></dt>
<dd><p>Create a regular time series filled with constant value or formula based on elapsed seconds</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>start</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pandas.Timestamp</span></code></span></dt><dd><p>Starting Timestamp or a string or type that can be coerced to one.</p>
</dd>
<dt><strong>end</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pandas.Timestamp</span></code></span></dt><dd><p>Ending Timestamp or a string or type that can be coerced to one.</p>
</dd>
<dt><strong>freq</strong><span class="classifier">_time_interval</span></dt><dd><p>Can also be a string representing an interval.</p>
</dd>
<dt><strong>valfunc</strong><span class="classifier">dict</span></dt><dd><p>Constant or dictionary that maps column names to lambdas based on elapsed time from the starts of the series. An example would be {“value”: lambda x: np.nan}</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>result</strong><span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pandas.DataFrame</span></code></span></dt><dd><p>A regular time series with the <cite>freq</cite> attribute set</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.seconds">
<span class="sig-name descname"><span class="pre">seconds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#seconds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.seconds" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing s seconds</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.time_overlap">
<span class="sig-name descname"><span class="pre">time_overlap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#time_overlap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.time_overlap" title="Link to this definition">¶</a></dt>
<dd><p>Check for overlapping time coverage between series
Returns a tuple of start and end of overlapping periods. Only considers
the time stamps of the start/end, possibly ignoring NaNs at the beginning
if valid=True, does not check for actual time stamp alignment</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.to_dataframe">
<span class="sig-name descname"><span class="pre">to_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#to_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.to_dataframe" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.transition_ts">
<span class="sig-name descname"><span class="pre">transition_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'series'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/timeseries.html#transition_ts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.transition_ts" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.timeseries.years">
<span class="sig-name descname"><span class="pre">years</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#years"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.timeseries.years" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing y years</p>
</dd></dl>

</section>
<section id="module-vtools.data.vis_gap">
<span id="vtools-data-vis-gap-module"></span><h2>vtools.data.vis_gap module<a class="headerlink" href="#module-vtools.data.vis_gap" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vis_gap.generate_sample_data">
<span class="sig-name descname"><span class="pre">generate_sample_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vis_gap.html#generate_sample_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vis_gap.generate_sample_data" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vis_gap.interactive_gap_plot">
<span class="sig-name descname"><span class="pre">interactive_gap_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vis_gap.html#interactive_gap_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vis_gap.interactive_gap_plot" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vis_gap.plot_missing_data">
<span class="sig-name descname"><span class="pre">plot_missing_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_gap_duration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_end</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vis_gap.html#plot_missing_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vis_gap.plot_missing_data" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-vtools.data.vtime">
<span id="vtools-data-vtime-module"></span><h2>vtools.data.vtime module<a class="headerlink" href="#module-vtools.data.vtime" title="Link to this heading">¶</a></h2>
<p>Basic ops for creating, testing and manipulating times and time intervals.
This module contains factory and helper functions for working with
times and time intervals.</p>
<p>For time intervals (or deltas), VTools uses classes that are compatible
with the “freq” argument of</p>
<p>requires a time and time
interval system that is consistent (e.g. time+n*interval makes sense)
and that can be applied to both calendar dependent
and calendar-independent intervals. Because this requirement
is not met by any one implementation it is recommended that
you always use the factory functions in this module
for creating intervals or testing whether an interval is valid.</p>
<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.days">
<span class="sig-name descname"><span class="pre">days</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#days"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.days" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing d days</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.dst_to_standard_naive">
<span class="sig-name descname"><span class="pre">dst_to_standard_naive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_zone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'US/Pacific'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard_zone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Etc/GMT+8'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#dst_to_standard_naive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.dst_to_standard_naive" title="Link to this definition">¶</a></dt>
<dd><p>Convert timezone-unaware series from a local (with daylight) time to standard time
This would be useful, say, for converting a series that is PDT during summer to one that is not.
The routine is mainly to treat cases where the time stamps at DST interfaces are not redundant – if they
are you can probably use tz_convert and tz_localize with the ambiguous = ‘infer’ option and do the job more
efficiently, but lots of databases don’t store data this way.</p>
<p>The choice of the standard_zone is, it seems, buggy. The defaults are supposed to convert from PST/PDT to pure PST,
and the latter should be GMT-8. In a sense, this function is included before the behavior is really understood.</p>
<p>Only regular series are accepted … this is a quirk of the implementation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.hours">
<span class="sig-name descname"><span class="pre">hours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#hours"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.hours" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing h hours</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.minutes">
<span class="sig-name descname"><span class="pre">minutes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#minutes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.minutes" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing m minutes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.months">
<span class="sig-name descname"><span class="pre">months</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#months"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.months" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing m months</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.seconds">
<span class="sig-name descname"><span class="pre">seconds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#seconds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.seconds" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing s seconds</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vtools.data.vtime.years">
<span class="sig-name descname"><span class="pre">years</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vtools/data/vtime.html#years"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#vtools.data.vtime.years" title="Link to this definition">¶</a></dt>
<dd><p>Create a time interval representing y years</p>
</dd></dl>

</section>
<section id="module-vtools.data">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-vtools.data" title="Link to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2019, California Department of Water Resources.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/vtools.data.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>